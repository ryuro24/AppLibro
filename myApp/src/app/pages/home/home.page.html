<ion-header>
  <ion-toolbar>
    <ion-title>CatÃ¡logo de libros</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">

  <!-- ComboBox for Genre Filter -->
  <ion-item>
    <ion-label>CategorÃ­a</ion-label>
    <ion-select [(ngModel)]="selectedFilter" (ionChange)="selectFilter(selectedFilter)">
      <ion-select-option *ngFor="let type of filterTypes" [value]="type">{{ type }}</ion-select-option>
    </ion-select>
  </ion-item>

  <!-- ComboBox for Rent/Sale Filter -->
  <ion-item>
    <ion-label>Tipo</ion-label>
    <ion-select [(ngModel)]="selectedPriceFilter" (ionChange)="selectPriceFilter(selectedPriceFilter)">
      <ion-select-option *ngFor="let type of priceFilters" [value]="type">{{ type }}</ion-select-option>
    </ion-select>
  </ion-item>

  <!-- Search Bar -->
  <ion-searchbar
    [(ngModel)]="searchTerm"
    (ionInput)="filteredBooks"
    placeholder="Buscar libro por tÃ­tulo">
  </ion-searchbar>

  <!-- Book Grid -->
  <ion-grid>
    <ion-row>
      <ion-col size="12" size-md="4" *ngFor="let book of filteredBooks">
        <ion-card class="book-card">
          <img [src]="book.cover" alt="Cover of {{ book.title }}" class="book-cover">
          
          <ion-card-header>
            <ion-card-title>{{ book.title }}</ion-card-title>
            <ion-card-subtitle>{{ book.author }}</ion-card-subtitle>
          </ion-card-header>

          <ion-card-content>
            <p>ðŸ“š GÃ©nero: {{ book.genre }}</p>

<!-- Rental Price & Availability (Only shown if rentPrice > 0) -->
<ion-item *ngIf="book.rentPrice > 0">
  <div class="price-box">
    <p>ðŸ’° Alquiler por semana: {{ '$' + book.rentPrice }}</p>
    <p>Disponibilidad para alquiler:  
      <span class="availability" [ngClass]="getAvailabilityClass(book.availableCopiesRent)"></span>
      {{ book.availableCopiesRent }}
    </p>
  </div>
</ion-item>

<!-- Purchase Price & Availability (Only shown if buyPrice > 0) -->
<ion-item *ngIf="book.buyPrice > 0">
  <div class="price-box">
    <p>ðŸ›’ Comprar: {{ '$' + book.buyPrice }}</p>
    <p>Disponibilidad para venta:  
      <span class="availability" [ngClass]="getAvailabilityClass(book.availableCopiesSales)"></span>
      {{ book.availableCopiesSales }}
    </p>
  </div>
</ion-item>

            <ion-button [routerLink]="'/book-detail/' + book.id" expand="full" color="primary">
              Detalle
            </ion-button>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>

</ion-content>